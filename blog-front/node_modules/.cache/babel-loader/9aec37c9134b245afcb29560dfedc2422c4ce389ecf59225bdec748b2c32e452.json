{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport axios from \"axios\";\nconst useAPI = () => {\n  _s();\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_API_URL\n  });\n  const {\n    getAccessTokenSilently,\n    isAuthenticated,\n    isLoading\n  } = useAuth0();\n  const getToken = async () => {\n    if (!isLoading && isAuthenticated) {\n      return await getAccessTokenSilently();\n    } else {\n      return null;\n    }\n  };\n  const get = async url => {\n    try {\n      const token = await getToken();\n      const response = await axiosInstance.get(url, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      if (response.status !== 200) {\n        throw new Error(`Unexpected response status: ${response.status}`);\n      }\n      return response.data;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  };\n  const getWithParams = async (url, params) => {\n    try {\n      const token = await getToken();\n      const response = await axiosInstance.get(url, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        },\n        params: params\n      });\n      if (response.status !== 200) {\n        throw new Error(`Unexpected response status: ${response.status}`);\n      }\n      return response.data;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  };\n  const post = (url, data) => {\n    return axiosInstance.post(url, {\n      data\n    });\n  };\n  const put = (url, data) => {\n    return axiosInstance.put(url, {\n      data\n    });\n  };\n  const patch = (url, data) => {\n    return axiosInstance.patch(url, {\n      data\n    });\n  };\n  const del = (url, data) => {\n    return axiosInstance.delete(url, {\n      data\n    });\n  };\n  return {\n    get,\n    post,\n    put,\n    patch,\n    del,\n    getWithParams\n  };\n};\n_s(useAPI, \"xEIHtHLl43NTUlJWtwnAgDer/Ek=\", false, function () {\n  return [useAuth0];\n});\nexport default useAPI;","map":{"version":3,"names":["useAuth0","axios","useAPI","_s","axiosInstance","create","baseURL","process","env","REACT_APP_API_URL","getAccessTokenSilently","isAuthenticated","isLoading","getToken","get","url","token","response","headers","Authorization","status","Error","data","error","console","getWithParams","params","post","put","patch","del","delete"],"sources":["C:/Users/jakub/OneDrive/Dokumenty/Github/B-Tech/blog-front/src/components/hooks/useAPI.js"],"sourcesContent":["import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport axios from \"axios\";\r\nconst useAPI = () => {\r\n\tconst axiosInstance = axios.create({\r\n\t\tbaseURL: process.env.REACT_APP_API_URL,\r\n\t});\r\n\r\n\tconst { getAccessTokenSilently, isAuthenticated, isLoading } = useAuth0();\r\n\r\n\tconst getToken = async () => {\r\n\t\tif (!isLoading && isAuthenticated) {\r\n\t\t\treturn await getAccessTokenSilently();\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tconst get = async (url) => {\r\n\t\ttry {\r\n\t\t\tconst token = await getToken();\r\n\r\n\t\t\tconst response = await axiosInstance.get(url, {\r\n\t\t\t\theaders: { Authorization: \"Bearer \" + token },\r\n\t\t\t});\r\n\t\t\tif (response.status !== 200) {\r\n\t\t\t\tthrow new Error(`Unexpected response status: ${response.status}`);\r\n\t\t\t}\r\n\t\t\treturn response.data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\tconst getWithParams = async (url, params) => {\r\n\t\ttry {\r\n\t\t\tconst token = await getToken();\r\n\t\t\tconst response = await axiosInstance.get(url, {\r\n\t\t\t\theaders: { Authorization: \"Bearer \" + token },\r\n\t\t\t\tparams: params,\r\n\t\t\t});\r\n\t\t\tif (response.status !== 200) {\r\n\t\t\t\tthrow new Error(`Unexpected response status: ${response.status}`);\r\n\t\t\t}\r\n\t\t\treturn response.data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\r\n\tconst post = (url, data) => {\r\n\t\treturn axiosInstance.post(url, { data });\r\n\t};\r\n\r\n\tconst put = (url, data) => {\r\n\t\treturn axiosInstance.put(url, { data });\r\n\t};\r\n\r\n\tconst patch = (url, data) => {\r\n\t\treturn axiosInstance.patch(url, { data });\r\n\t};\r\n\r\n\tconst del = (url, data) => {\r\n\t\treturn axiosInstance.delete(url, { data });\r\n\t};\r\n\r\n\treturn { get, post, put, patch, del, getWithParams };\r\n};\r\n\r\nexport default useAPI;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}